function jGastona(evaConfig,existingPlaceId){"use strict";function getWindowWidth(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function getWindowHeight(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function adaptaLayout(){if(layMan){var t=getWindowWidth()-15,a=getWindowHeight()-15,e=layMan.guiConfig.layoutWindowLimits;if(e&&e[0]){var n=parseInt("0"|e[0][0]),i=parseInt("0"|e[0][1]),r=parseInt("0"|e[0][2]),o=parseInt("0"|e[0][3]);t=Math.max(t,n),a=Math.max(a,i),r>0&&(t=Math.min(t,r)),o>0&&(a=Math.min(a,o))}layMan&&layMan.doLayout(t,a)}}function loadJast(t){if(javajzWidgets={},responseAjaxUnit={},dataUnit={},listixUnit={},layMan=void 0,t){if(dataUnit=t.data||{},listixUnit=t.listix||{},!corpiny){var a="jGastonaStammHtmlElem";document.getElementById(a)||(document.body.innerHTML="<div id='"+a+"' style = 'position:relative;'></div>"),corpiny=document.getElementById(a)}for(corpiny||alert("ERROR no "+a+" no fun!");corpiny.hasChildNodes();)corpiny.removeChild(corpiny.firstChild);layMan=layoutManager(t,onAddWidget),adaptaLayout()}}function getCellEvaUnit(t,a,e,n){return t[a]?t[a][e||"0"][n||"0"]||"":""}function getDataCell(t,a,e){return getCellEvaUnit(dataUnit,t,a,e)}function setDataCell(t,a,e,n){dataUnit[t]||(dataUnit[t]=[[""]]),dataUnit[t][e||"0"]||(dataUnit[t][e||"0"]=[""]),dataUnit[t][e||"0"][n||"0"]=a||""}function setData(t,a){"string"==typeof a?setDataCell(t,a):Array.isArray(a)&&a.length>0&&Array.isArray(a[0])?dataUnit[t]=a:alert('Error: setData "'+t+'", the value is not a string nor looks like an eva variable');var e=getzWidgetByName(t);e&&updatezWidget(e)}function mensaka(t){var a=t.indexOf(" ");if(a>0){var e=t.substr(0,a),n=t.substr(a+1);if(javajzWidgets[e])return void(javajzWidgets[e][n]?javajzWidgets[e][n]():console.log("Error: widget "+e+" has no method '"+n+"'"))}var i=dataUnit["-- "+t]||listixUnit["-- "+t];return i?void executeListixFormat(i):void console.log('ignoring mensaka "'+t+'"')}function executeListixFormat(fbody){var strBody="";for(var ii in fbody)strBody+=fbody[ii]+"\n";eval(strBody)}function setVarTable_DimVal(t){var a=[["dimension","value"]];for(var e in t)a.push([t[e],getDataCell(t[e])]);dataUnit.varTable_DimVal=a}function setValueToElement(t,a){t&&("string"==typeof t.value?t.value=a:t.innerHTML=a)}function onAddWidget(t){if(t&&0!=t.length){var a,e=function(){this.innerHTML=dataUnit[t]?getDataCell(t):t.substr(1)},n=function(){setValueToElement(this,getDataCell(t))},i=function(){this.value=""},r=function(){this.style["background-image"]="url('"+getDataCell(t)+"')"},o=function(){dataUnit[t][0]=[this.value||"?"]},d=function(){dataUnit[t]=[[]];var a=this.value||"?",e=a.split("\n");for(var n in e)dataUnit[t][n]=[e[n]]},s=function(){mensaka(t)},l=dataUnit["class of "+t],c=l?l[0][0]:t;switch(c.charAt(0)){case"d":a=fabricaStandard("div",t,{"data!":e});break;case"n":a=fabricaStandard("a",t,{href:"login","data!":e});break;case"b":a=fabricaStandard("button",t,{onclick:s,"data!":e});break;case"e":a=fabricaStandard("input",t,{type:"text",onchange:o,"data!":n});break;case"f":a=fabricaStandard("input",t,{type:"file",onchange:s,"data!":i});break;case"m":a=fabricaStandard("div",t,{"data!":r});break;case"p":a=fabricaStandard("input",t,{type:"password",onchange:o,"data!":n});break;case"l":a=fabricaStandard("label",t,{"data!":e});break;case"x":var u=function(){var t,a="";for(t in dataUnit[this.id])a+=dataUnit[this.id][t]+"\n";setValueToElement(this,a)};a=fabricaStandard("textarea",t,{"data!":u,onchange:d});break;case"t":var u=function(){for(var t,a,e,n,i,r=dataUnit[this.id];this.hasChildNodes();)this.removeChild(this.firstChild);t=document.createElement("table"),t.id=this.id+"-table";for(n in r){a=document.createElement("tr");for(i in r[n])e=document.createElement("0"===n?"th":"td"),setValueToElement(e,r[n][i]),a.appendChild(e);t.appendChild(a)}this.appendChild(t)};a=fabricaSimpleTable(t,{"data!":u});break;case"c":case"r":case"k":case"i":var f=[],p=[];for(var v in dataUnit[t])"0"!==v&&(p.push(dataUnit[t][v][0]||"?"),f.push(dataUnit[t][v][1]||"?"));var g=dataUnit[t+" orientation"]||"X";"c"==t.charAt(0)&&corpiny.appendChild(fabricaSelect(t,p,f,!1)),"i"==t.charAt(0)&&corpiny.appendChild(fabricaSelect(t,p,f,!0)),"r"==t.charAt(0)&&corpiny.appendChild(fabricaGrupo("radio",g,t,p,f)),"k"==t.charAt(0)&&corpiny.appendChild(fabricaGrupo("checkbox",g,t,p,f))}a&&(javajzWidgets[t]=a,corpiny.appendChild(a),updatezWidget(a))}}function getzWidgetByName(t){return javajzWidgets[t]}function updatezWidget(t){t&&(t["data!"]?t["data!"]():alert("ERROR (updateWidget) zwidget /"+t.id+"/ with no 'data!' message"))}function str2jsVar(str){var str2="";if("string"!=typeof str)for(var ii=0;ii<str.length;ii++)str2=(0===ii?"":str2+"\n")+str[ii];else str2=str;return str2.match(/^\s*[\"\']/)?str2.substr(1):str2.match(/^\s*[\[\{]/)?eval("(function () { return "+str2+";}) ()"):function(){eval(str2)}}function fabricaStandard(t,a,e){var n=document.createElement(t);n.id=a,n.style.visibility="hidden",n.spellcheck=!1;for(var i in e)n[i]=e[i];"input"!==t||dataUnit[a]||(dataUnit[a]=[[""]]);for(var r in dataUnit)if(r.startsWith(a+" ")){var o=r.substr(a.length+1),d=dataUnit[r];n[o]=str2jsVar(d)}return n}function fabricaCombo(t,a,e){return fabricaSelect(t,a,e,!1)}function fabricaList(t,a,e){return fabricaSelect(t,a,e,!0)}function fabricaSelect(t,a,e,n){var i=document.createElement("select");n&&(i.multiple="si"),i.id=t,i.style.visibility="hidden",i.onchange=function(){mensaka(t)};for(var r in a){var o=document.createElement("option");o.value=a[r],o["data!"]=function(){},o.appendChild(document.createTextNode(e[r])),i.appendChild(o)}return i}function fabricaGrupo(t,a,e,n,i){var r=document.createElement("div");r.id=e,r.style.visibility="hidden",r.onchange=function(){mensaka(e)};for(var o in n){var d=document.createElement("input");d.type=t,d.name=e,d.value=n[o],d.label=i[o],d["data!"]=function(){},d.onchange=function(){dataUnit[e+" selected.value"]=[[this.value||"?"]],dataUnit[e+" selected.label"]=[[this.label||"?"]],dataUnit[e+"_value"]=[[this.value||"?"]]},"0"===o||"Y"!=a&&"V"!=a||r.appendChild(document.createElement("br")),r.appendChild(d),r.appendChild(document.createTextNode(i[o]))}return r}function fabricaSimpleTable(t,a){var e=document.createElement("div");e.id=t,e.widgetype="t",e.style.visibility="hidden";for(var n in a)e[n]=a[n];return e}function jaxGetHttpReq(){return window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):void alert("Your browser does not support AJAX!")}function startsWith(t,a){return t.slice(0,a.length)===a}function jaxDefaultResponseFunc(t,a){var e="unitAjaxResponse";responseAjaxUnit=startsWith(t,"#"+e+"#")?evaFileStr2obj(t)[e]||{}:{"ajaxRESP-rawBody":[[t]]};var n,i=1;do n=a.getResponseHeader("ajaxRESP-parameter"+i),n&&(responseAjaxUnit["ajaxRESP-parameter"+i]=[[n]]),i++;while(n)}function AJAXFormatBody(t,a,e,n){function i(t){return!n&&dataUnit[a[t]]&&1==dataUnit[a[t]].length&&1==dataUnit[a[t]][0].length?[[encodeURIComponent(dataUnit[a[t]])]]:dataUnit[a[t]]||""}var r;if(e=e||"eva",!a){a=[];for(var o in dataUnit)a.push(o)}var d="";if("propval"===e)for(r in a)d+="\n"+a[r]+":"+i(r);else if("json"===e){d="{";for(r in a)d+="'"+a[r]+"' : '"+i(r)+"', ";d+="}"}else if("eva"===e){var s=evaFileObj("#unitAjaxRequest#\n   <_jGastonaVersion> 1.0\n"),l=s.obj.unitAjaxRequest;for(r in a)l[a[r]]=i(r);d=s.toText()}else alert("ERROR: calling AJAXFormatBody with not supported format ["+e+"]");return d}function ajaxGenericPreProcessResponse(){}function AJAXgenericPost(t,a,e,n){var i=jaxGetHttpReq();if(!i)return!1;if(n||(n=jaxDefaultResponseFunc),i.onreadystatechange=function(){4==i.readyState&&200==i.status&&(ajaxGenericPreProcessResponse(i),n(i.responseText,i),mensaka("ajaxResponse "+t))},i.open("POST",t,!0),e)for(var r in e)i.setRequestHeader(r,e[r]);i.send(a)}function AJAXSendData(t,a,e,n){var i="string"==typeof a?a:AJAXFormatBody(t,a,e,n);AJAXgenericPost(t,i)}function AJAXUploadFile(t,a,e){var n=t.files[0];if(!n||""===n)return!1;var i=new FormData;i.append("filename",n),AJAXgenericPost(a,i,e)}function AJAXLoadRootJast(t){AJAXgenericPost("loadRootJast","",{"ajaxREQ-jastName":t},function(t){loadJast(evaFileStr2obj(t))})}function setContentsFromBody(t,a,e){var n="";if(e){for(var i=a.split("\n"),r=0;r<i.length;){var o=/([^:]*):(.*)/.exec(i[r++]);if(o){if(""===o[1])break;setData(o[1],o[2])}}for(var d=r;d<i.length;d++)n=n+(d!=r?"\n":"")+i[d]}else n=a;var s=document.getElementById(t);s&&setValueToElement(s,n)}function AJAXgetIdContent(t,a,e){var n="string"==typeof a?{"ajaxREQ-param":a}:a||{};n["ajaxREQ-id"]=t,AJAXgenericPost("getIdContent","",n,function(a){setContentsFromBody(t,a,e)})}function AJAXgetIdMultipleContents(t,a){AJAXgetIdContent(t,a,!0)}var dataUnit,listixUnit,corpiny,layMan,responseAjaxUnit,javajzWidgets,minWidth=-1,minHeight=-1;return corpiny=existingPlaceId,loadJast(evaConfig),document.body.onresize=function(){adaptaLayout()},{getLayoutMan:function(){return layMan},mensaka:mensaka,getIdValue:function(t){var a=document.getElementById(t);return a?a.value:getDataCell(t)},getData:getDataCell,setData:setData,setVarTable_DimVal:setVarTable_DimVal,getCellEvaUnit:getCellEvaUnit,adapta:adaptaLayout,mask:function(t,a){layMan&&(layMan.maskLayoutId(t,a),adaptaLayout())},unmask:function(t){layMan&&(layMan.unmaskLayoutId(t),adaptaLayout())},getAjaxResponse:function(){return responseAjaxUnit},AJAXPost:AJAXgenericPost,AJAXSendData:AJAXSendData,AJAXSendBody:AJAXSendData,AJAXUploadFile:AJAXUploadFile,AJAXLoadRootJast:AJAXLoadRootJast,AJAXgetIdContent:AJAXgetIdContent,AJAXgetIdMultipleContents:AJAXgetIdMultipleContents}}