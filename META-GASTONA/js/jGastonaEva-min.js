/*
jGastonaEva-min.js version 0.201906 / fixjreg
composed by Eva.js + EvaLayout.js + LayoutManager.js + httSaco.js + zWidgetsHtml.js + jGastona.js minified
is part of the open source project https://github.com/wakeupthecat/gastona

Copyright (C) 2015-2019 Alejandro Xalabarder Aulet
@license : GNU General Public License (GPL) version 3

This program is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE. See the GNU General Public License for more details.
*/
"use strict";function evaFileObj(t){return"string"==typeof t&&(t=evaFileStr2obj(t)),{obj:t,toText:function(){return a(t)},toString:function(){return a(t)},evaFileObj2Text:a,evaUnitObj2Text:e,evaObj2Text:n};function a(t){var a=[];for(var n in t)a.push("#"+n+"#"),a.push(""),a.push(e(t[n])),a.push("");return a.join("\n")}function e(t){var a=[];for(var e in t)a.push(""),a.push("   <"+e+">"),a.push(""),a.push(n(t[e]));return a.join("\n")}function n(t){var a=[],e="";for(var n in t){for(var i in e="      ",t[n])i>0&&(e+=", "),i==t[n].length-1&&(e+="//"),e+=t[n][i];a.push(e)}return a.join("\n")}}function evaFile(t){alert("evaFile function name is deprecated! please use evaFileStr2obj instead"),evaFileStr2obj(t)}function evaFileUTF82obj(t){return evaFileStr2obj(decodeURIComponent(t.replace(/\+/g,"%20")))}function evaFileStr2obj(t){function a(t){return t.replace(/^\s+|\s+$/g,"")}function e(t){return t.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/)}return function(t){var r,o,l,s,d,u,c={},f={},g=[];function h(t){o&&(f[o]=g.length>0?g:[[""]]),o=void 0,g=[],t&&(r&&(c[r]=f),r=void 0,f=[])}var v=t;"string"==typeof t&&(v=e(t));for(u in v)if("<"!==(s=a(v[u])).charAt(0)||"!"!==s.charAt(1))if(l=n(s,"#","#")){if(l.name&&"*"===l.name.charAt(0)&&"*"==l.name.charAt(1))break;h(!0),r=l.name}else(l=n(s,"<",">"))&&(h(!1),o=l.name,0==(s=l.rest).length)||s&&r&&o&&(d=i(s))&&g.push(d);return h(!0),c}(t);function n(t,e,n){if(t.charAt(0)===e){var i=t.indexOf(n,1);return i>0?{name:t.substr(1,i-1),rest:a(t.substr(i+1))}:void 0}}function i(t){var a=[],e=t.length,n=0;function i(){return n>=t.length}function r(){for(var a="";n<t.length&&(" "==t.charAt(n)||"\t"==t.charAt(n));)n++;if(i())return null;if("'"==t.charAt(n))return a=t.substring(n+1),n=e,a;if("/"==t.charAt(n)&&"/"==t.charAt(n+1))return a=t.substring(n+2),n=e,a;var r='"'==t.charAt(n),o=r?++n:n;do{if(r)if('"'!=t.charAt(n))n++;else{if('"'!=t.charAt(n+1))break;a+=n+1>o?t.substring(o,n+1):"",o=n+=2}else{if(","==t.charAt(n))break;n++}}while(!i());var l=n;if(!r)for(;l>o&&(" "===t.charAt(l-1)||"\t"===t.charAt(l-1));)l--;if(l>o&&(a+=t.substring(o,l)),n++,r){for(;!i()&&","!=t.charAt(n);)n++;n++}return a}do{var o=r();"string"==typeof o&&a.push(o)}while(!i());return a}}function EvaLayout(t,a){var e,n,i=0,r="A",o="X",l="-",s="+",d=!1,u=t.guiLayouts[a],c={left:0,right:200,top:0,bottom:20};if(u){if(u[0][0].match(/^eva$|^evalayout$/i))return{precalculateLayout:v,wName:a,isLaidOut:!1,iniRect:c,indxPos:{ileft:0,iright:0,itop:0,ibottom:0},invalidate:function(){d=!1},isWidget:!1,doMove:function(a,r,o,l){v();for(var s=Math.max(0,l-n.fixedSize()),d=Math.max(0,o-e.fixedSize()),u=a+e.margin,c=0;c<e.countItems();c++){c>0&&(u+=e.getLengthInRange(d,c-1));for(var f=r+n.margin,g=0;g<n.countItems();g++){g>0&&(f+=n.getLengthInRange(s,g-1));var m=h(g,c);if(m){var p=t.getLayableByName(m);if(p)if(p.isLaidOut){var y=-e.gap,b=-n.gap;if(y+=e.getLengthInRange(d,p.indxPos.ileft,p.indxPos.iright),b+=n.getLengthInRange(s,p.indxPos.itop,p.indxPos.ibottom),u<0||f<0||y<0||b<0){i&&console.log("esto "+m+" no se ve na de na "+u+", "+f+", "+y+", "+b);continue}i&&console.log("widget "+m+" set at "+u+", "+f+" dim "+y+" x "+b),p.doMove(u,f,y,b),p.doShow(!0)}else i&&console.log("esto "+m+" lo oculto "),p.doShow(!1)}}}},doShow:function(a){v();for(var i=0;i<e.countItems();i++)for(var r=0;r<n.countItems();r++){var o=t.getLayableByName(h(r,i));o&&o.doShow(a)}}}}else console.log('ERROR: no eva found with name "'+a+'"');function f(t,a){var e=0,n=1,i=2,l=0,s=0,d=[];return{margin:t,gap:a,fixedSize:function(){return s},regla:d,addItem:function(t){var a=function(t){var a=n,l=0,s=0;0==(t+="").length||0==t.indexOf(r)?a=n:0==t.indexOf(o)?(a=i,l=t.length<2?1:parseInt(t.substr(1))):(a=e,s=parseInt(t));return{type:a,len:s,extraPercent:l}}(t||"");d.push(a),l+=a.extraPercent},setLengthOfItemAt:function(t,a){d[t]&&d[t].type==n&&(d[t].len=Math.max(d[t].len,a))},endItems:function(){var e,n;for(e in s=t+t+a*(d.length-1),d)n=d[e],s+=n.len,l>0&&(n.extraPercent=n.extraPercent/l)},getLengthInRange:function(t,e,n){var i=0;for(n=n||e;(e<=n||-1==n)&&e<d.length;e++)i+=a+d[e].len+d[e].extraPercent*t;return i},countItems:function(){return d.length}}}function g(t){return u[2+t][0]}function h(t,a){if(a+=1,(t+=2)>=0&&t<u.length&&a>=0&&a<u[t].length)return u[t][a]}function v(){if(!d){e=f(parseInt(u[0][1])||0,parseInt(u[0][3])||0),n=f(parseInt(u[0][2])||0,parseInt(u[0][4])||0);for(var a,r=0,o=u.length-2,v=0;v<o;v++){r=u[2+v].length-1,n.addItem(g(v));for(var m=0;m<r;m++){m>=e.countItems()&&e.addItem((a=m,u[1][a+1]));var p=h(v,m);if(p){i&&console.log("precalc "+p);var y=t.getLayableByName(p);if(y){y.indxPos.ileft=m,y.indxPos.itop=v;for(var b=m;b+1<r&&h(v,b+1)===l;)b++;for(b+1<r&&h(v,b+1)===l+l&&(b=-1),y.indxPos.iright=b,b==m&&e.setLengthOfItemAt(m,y.iniRect.right-y.iniRect.left),b=v;b+1<o&&h(b+1,m)===s;)b++;b+1<o&&h(b+1,m)===s+s&&(b=-1),y.indxPos.ibottom=b,b==v&&n.setLengthOfItemAt(v,y.iniRect.bottom-y.iniRect.top),i&&console.log("precalc set "+p+" at "+y.indxPos.ileft+", "+y.indxPos.itop+", "+y.indxPos.iright+", "+y.indxPos.ibottom),y.isLaidOut=!0}}}}e.endItems(),n.endItems(),c.top=0,c.bottom=n.fixedSize(),c.left=0,c.right=e.fixedSize(),d=!0}}}function layoutManager(t,a){var e,n,i,r={},o=[],l={};return h(t),{guiConfig:n,loadConfig:function(a){h(t=a)},maskLayoutId:function(t,a){r[t]=a&&""!==a&&t!==a?a:void 0,!0,d()},unmaskLayoutId:function(t){return!!r[t]&&(r[t]=void 0,!0,d(),!0)},doShowLayout:function(t,a,e){v(t,0,0,a,e)},setLayout:function(t){s(t)},doLayout:function(t,a){v(i,0,0,t,a)}};function s(t){i&&i===t||d(),i=t}function d(){for(var t in l){var a=l[t];a.isWidget?a.doShow(!1):a.invalidate()}}function u(t,e){return e=a.defaultSize4widget(t,e),{wName:t,isLaidOut:!1,iniRect:e||{left:0,right:200,top:0,bottom:20},indxPos:{ileft:0,iright:0,itop:0,ibottom:0},isWidget:!0,doMove:function(e,n,i,r){a.doMoveWidget(t,e,n,i,r)},doShow:function(e){a.doShowWidget(t,e)}}}function c(t){if(""!==t&&g(t)){var a=l[f(t)];return a?(function(t,a,e){for(e in t)if(t[e]===a)return console.log("ERROR: layout element "+a+" already exists, it cannot be stacked!"),!1;return!0}(o,a.wName)&&(a.isWidget||a.precalculateLayout()),a):(console.log("ERROR: don't know how to find "+t+" or "+f(t)),u("bDummy"))}}function f(t){var a,e,n=[];if(!g(t))return t;do{if(!(a=r[t])||""===a||a===t)return t;for(e in n)if(n[e]===a)return console.log("ERROR: masks for "+t+" found circular!"),t;n.push(t),t=a}while(n.length<200);return console.log("ERROR: masks for "+t+" too deep!"),t}function g(t){return!(!t||0==t.length)&&t.match(/^[^+-]/)}function h(t){if(n={},!(e=t.layouts)){e={};var i=t.jGuix||t.guix||t.javaj;if(!i)return void console.log("Error: unit layouts not found!");for(var s in i)0==s.indexOf("layout of ")?e[s.substr(10)]=i[s]:n[s]=i[s]}for(var d in!0,r={},o=[],l={},e){var f=EvaLayout({guiLayouts:e,guiConfig:n,getLayableByName:c},d);f&&(l[d]=f)}for(var d in e){s=e[d];for(var h=2;h<s.length;h++)for(var v=1;v<s[h].length;v++){var m=s[h][v];g(m)&&(l[m]||(a.addWidget(m),l[m]=u(m)))}}}function v(t,a,e,n,i){s(t=t||"main");var r=c(t);r&&(o.push(r.wName),r.doMove(a,e,n,i),o.pop())}}function httPack(t,a){var e={onelineparams:"",headers:{},body:""},n="",i=[],r=!0;if("string"==typeof t)i=[t];else{r=!1!==(t=t||{}).encodeUTF8,e.headers=t.headers||{};var o=t.params||t.parameters||{};if("string"==typeof o)i=[o];else for(var l in o)i.push(l+"="+s(o[l]));"string"!=typeof(n=t.body)&&(n=function(t,e){function n(e){if(!r)return a[t[e]];var n=[],i=a[t[e]];for(var o in i){var l=[];for(var d in i[o])l.push(s(i[o][d]));n.push(l)}return n}function i(e){return s(function(t){var a=[];for(var e in t)for(var n in t[e])a.push(n>0?",":""+t[e][n]);return a.join("\n")}(a[t[e]]))}if(!t)for(var o in t=[],a)t.push(o);var l,d="";if("propval"===e){var u=[];for(l in t)u.push(t[l]+":"+i(l));d=u.join("\n")}else if("json"===e){var c={};for(l in t)c[t[l]]=n(l);d=JSON.stringify(c)}else if("eva"===e){var f=evaFileObj("#data#\n"),g=f.obj.data;for(l in t)g[t[l]]=n(l);d=f.toText()}else alert("ERROR: calling formatBody with not supported format ["+e+"]");return d}(t.bodyVars,t.bodyVarsFormat||"eva"))}return e.onelineparams=i.join("&"),e.body=n,e;function s(t){return r?encodeURIComponent((""+t).replace(/'/g,"%27")):t+""}}function httUnpack(t,a){var e={},n={},i=a.getResponseHeader("Content-Type");if(i&&(n=null,-1!==(r=i.split(";")).indexOf("text/eva")?n=evaFileStr2obj(t):-1!==r.indexOf("text/evas")?n=evaFileStr2obj("#anonima#\n"+t).anonima:-1!==r.indexOf("text/json")&&(n=JSON.parse(t))),null==n&&(n={rawBody:t}),e["obj-body"]=n,i=a.getResponseHeader("XParamsInOneLine")){n={};var r=i.split("&");for(var o in r){var l=r[o].split("=");2===l.length?n[l[0]]=decodeURIComponent(l[1]):console.log("ERROR on XParamsInOneLine variable ["+r[o]+"]")}e["obj-params"]=n}n={};var s=a.getAllResponseHeaders().split("\n");for(var d in s){var u=s[d].split(":",1);u&&u[0]&&(n[u[0]]=a.getResponseHeader(u[0]))}return e["obj-headers"]=n,e}function zWidgets(htmlStamm,laData,mensaka){var javajzWidgets={};return{addWidget:addWidget,deliverMsgToWidget:deliverMsgToWidget,defaultSize4widget:defaultSize4widget,doMoveWidget:doMoveWidget,doShowWidget:doShowWidget};function str2lineArray(t){return t.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/)}function getIdValue(t){var a=document.getElementById(t);return a?a.value:getDataCell(t)}function getWidgetByName(t){return javajzWidgets[t]}function getzWidgetByName(t){return getWidgetByName(t)}function deliverMsgToWidget(t,a){var e=getWidgetByName(t);return!!e&&(e[a]?(e[a](),!0):(alert("ERROR (updateWidget) zwidget /"+e.id+"/ with no 'data!' message"),!1))}function defaultSize4widget(t,a){if(!a){var e=document.getElementById(t);if(e){var n=e.offsetHeight+1,i=e.offsetWidth+1;n>1&&(a={left:0,right:1.2*i,top:0,bottom:1.2*n})}}return a}function doMoveWidget(t,a,e,n,i){var r=document.getElementById(t);r?(r.style.position="absolute",r.style.left=Math.round(a)+"px",r.style.top=Math.round(e)+"px",r.style.width=Math.round(n)+"px",r.style.height=Math.round(i)+"px"):console.log("ERROR expected html element "+t+" not found!")}function doShowWidget(t,a){var e=document.getElementById(t);e&&(e.style.visibility=a?"visible":"hidden")}function strStartsWith(t,a,e){return e=e||0,t.indexOf(a,e)===e}function setValueToElement(t,a){t&&("string"==typeof t.value?t.value=a:t.innerHTML=a)}function addWidget(t){if(t&&0!=t.length){var a,e=function(){this.innerHTML=laData.dataUnit[t]?laData.getDataCell(t):v(t)},n=function(){setValueToElement(this,laData.getDataCell(t))},i=function(){mensaka(t)},r=function(){laData.dataUnit[t][0]=[this.value||"?"],i()},o=laData.dataUnit["class of "+t],l=o?o[0][0]:t;switch(l.charAt(0)){case"d":a=fabricaStandard("div",t,{"data!":e});break;case"n":a=fabricaStandard("a",t,{href:"login","data!":e});break;case"b":a=fabricaStandard("button",t,{onclick:i,"data!":e});break;case"e":a=fabricaStandard("input",t,{type:"text",onchange:r,placeholder:v(t),"data!":n});break;case"u":a=fabricaStandard("input",t,{type:"file",onchange:i,"data!":function(){this.value=""}});break;case"m":(a=fabricaStandard("div",t,{onclick:i,"data!":function(){this.style["background-image"]="url('"+laData.getDataCell(t)+"')"}})).style["background-position"]="center center",a.style["background-repeat"]="no-repeat",a.style["background-size"]="contain";break;case"p":a=fabricaStandard("input",t,{type:"password",placeholder:"password",onchange:r,"data!":n});break;case"h":l.length>=2&&(a=fabricaStandard("h"+l.charAt(1),t,{"data!":function(){this.innerHTML=laData.dataUnit[t]?laData.getDataCell(t):v(t.substr(1))}}));break;case"l":a=fabricaStandard("label",t,{"data!":e});break;case"x":var s=function(){var t,a="";if(!laData.isEvaEmpty(laData.dataUnit[this.id]))for(t in laData.dataUnit[this.id])a+=laData.dataUnit[this.id][t]+"\n";setValueToElement(this,a)};a=fabricaStandard("textarea",t,{placeholder:v(t),"data!":s,onchange:function(){laData.dataUnit[t]=[[]];var a=str2lineArray(this.value||"?");for(var e in a)laData.dataUnit[t][e]=[a[e]];i()}});break;case"t":a=fabricaSimpleTable(t,{"data!":s=function(){for(var t,a,e,n,i,r=laData.dataUnit[this.id];this.hasChildNodes();)this.removeChild(this.firstChild);for(n in(t=document.createElement("table")).id=this.id+"-table",r)if(laData.isEvaEmpty(r));else{for(i in a=document.createElement("tr"),r[n])setValueToElement(e=document.createElement("0"===n?"th":"td"),r[n][i]),a.appendChild(e);t.appendChild(a)}this.appendChild(t)}});break;case"c":case"r":case"k":case"i":var d=[],u=[],c=0,f=0;for(var g in laData.dataUnit[t])"0"===g?(-1==(c=laData.dataUnit[t][g].indexOf("label"))&&(c=0),-1==(f=laData.dataUnit[t][g].indexOf("value"))&&(f=0)):(u.push(laData.dataUnit[t][g][f]||"?"),d.push(laData.dataUnit[t][g][c]||"?"));var h=laData.dataUnit[t+" orientation"]||"X";"c"==t.charAt(0)&&htmlStamm.appendChild(fabricaSelectList(t,u,d,!1)),"i"==t.charAt(0)&&htmlStamm.appendChild(fabricaSelectList(t,u,d,!0)),"r"==t.charAt(0)&&htmlStamm.appendChild(fabricaGrupo("radio",h,t,u,d)),"k"==t.charAt(0)&&htmlStamm.appendChild(fabricaGrupo("checkbox",h,t,u,d))}a&&(javajzWidgets[t]=a,htmlStamm.appendChild(a),deliverMsgToWidget(t,"data!"),laData.dataUnit[t]||(laData.dataUnit[t]=[[""]]))}function v(t){if(t.length<=2)return"";for(var a=t[1],e=2;e<t.length;e++)"_"==t[e]?a+=" ":(t[e]<"Z"&&" "!=a[a.length-1]&&(a+=" "),a+=t[e]);return a}}function str2Var(str){var str2="";return str2="string"!=typeof str?str.join("\n"):str,str2.match(/^\s*[\"\']/)?str2.substr(1):str2.match(/^\s*[\[\{]/)?eval("(function () { return "+str2+";}) ()"):str2}function strStartsWith(t,a,e){return e=e||0,t.indexOf(a,e)===e}function fabricaStandard(typestr,name,atts){var ele=document.createElement(typestr);for(var aa in ele.id=name,ele.style.visibility="hidden",ele.spellcheck=!1,atts)ele[aa]=atts[aa];for(var dd in"input"!==typestr||laData.dataUnit[name]||(laData.dataUnit[name]=[[""]]),laData.dataUnit)if(strStartsWith(dd,name+" ")){var attrib=dd.substr(name.length+1),value=laData.dataUnit[dd];strStartsWith(attrib,"on")?ele.addEventListener(attrib.substr(2),function(){"onchange"!==attrib&&ele.onchange&&ele.onchange(),eval(str2Var(value))}):"class"==attrib?ele.className=value:"+class"==attrib&&(ele.className+=" "+value);try{ele[attrib]=str2Var(value)}catch(t){}}return ele}function selectAllColumnsFromTable(t,a,e){if(!t||!t[a]||!t[a][0])return!1;var n=t[a][0],i=n.indexOf("value");for(var r in-1===i&&(i=0),n)delete t[a+" selected."+n[r]];for(var o=1;o<t[a].length;o++)if(t[a][o][i]===e){for(var r in n)t[a+" selected."+n[r]]=[[t[a][o][r]||"?"]];return!0}return!1}function whenChangeTableSelection(t,a){selectAllColumnsFromTable(laData.dataUnit,t,a||"?")?laData.dataUnit[t+"_value"]=[[a||"?"]]:delete laData.dataUnit[t+"_value"],mensaka(t)}function fabricaSelectList(t,a,e,n){var i=document.createElement("select");for(var r in n&&(i.multiple="si"),i.id=t,i.style.visibility="hidden",i.addEventListener("change",function(){whenChangeTableSelection(t,this.value)}),a){var o=document.createElement("option");o.value=a[r],o["data!"]=function(){},o.appendChild(document.createTextNode(e[r])),i.appendChild(o)}return i}function fabricaGrupo(t,a,e,n,i){var r=document.createElement("div");r.id=e,r.style.visibility="hidden";var o=0;for(var l in n){var s=document.createElement("input");s.type=t,s.name=e,s.value=n[l],s.label=i[l];var d=12*s.label.length;s["data!"]=function(){},s.addEventListener("change",function(){whenChangeTableSelection(e,this.value)}),"0"===l||"Y"!=a&&"V"!=a?o+=d:(r.appendChild(document.createElement("br")),o=Math.max(o,d)),r.appendChild(s),r.appendChild(document.createTextNode(i[l]))}return r.style.width=o+"px",r}function fabricaSimpleTable(t,a){var e=document.createElement("div");for(var n in e.id=t,e.widgetype="t",e.style.visibility="hidden",a)e[n]=a[n];return e}}function jGastona(evaConfig,existingPlaceId){var laData=dataStruct(),listixUnit,corpiny,isStammLayout=!1,layMan,losWidgets,getData=function(t){return laData.getData(t)},getDataAsTextArray=function(t){return laData.getDataAsTextArray(t)},getDataCell=function(t,a,e){return laData.getDataCell(t,a,e)},setData=function(t,a){return laData.setData(t,a)},setDataCell=function(t,a,e){return laData.setDataCell(t,a,e)},setVarTable_DimVal=function(t){return laData.setVarTable_DimVal(t)},getCellEvaUnit=function(t,a,e,n){return laData.getCellEvaUnit(t,a,e,n)},AJAX_RESPONSE_MESSAGE="ajaxResponse",started=!1;function start(){started=!0,loadJast(evaConfig,existingPlaceId),window.addEventListener("resize",adaptaLayout)}function dataStruct(t){var a=t||{};return{dataUnit:a,getCellEvaUnit:i,getData:r,getDataAsTextArray:function(t){var a=r(t),e=[];for(var n in a)e.push(a[n][0]);return e},getDataCell:o,setData:function(t,n){"string"==typeof n?(a[t]=[[""]],function(t,e,n,i){n=n||"0",i=i||"0",a[t]||(a[t]=[[""]]);a[t][n]||(a[t][n]=[""]);a[t][n][i]=e||""}(t,n)):e(n)?a[t]=n:alert('Error: setData "'+t+'", the value is not a string nor looks like an eva variable');mensaka(t+" data!")},setVarTable_DimVal:function(t){var e=[["dimension","value"]];for(var n in t)e.push([t[n],o(t[n])]);a.varTable_DimVal=e},isEvaValue:e,isEvaSingleValue:n,isEvaEmpty:function(t){return n(t)&&""===t[0][0]}};function e(t){return Array.isArray(t)&&t.length>0&&Array.isArray(t[0])}function n(t){return e(t)&&1==t.length&&1==t[0].length}function i(t,a,e,n){return t[a]&&t[a][e||"0"][n||"0"]||""}function r(t){return a[t]?a[t]:void 0}function o(t,e,n){return i(a,t,e,n)}}return{start:start,run:start,getLayoutMan:function(){return layMan},mensaka:mensaka,getData:getData,getDataAsTextArray:getDataAsTextArray,getDataCell:getDataCell,setData:setData,setDataCell:setDataCell,setVarTable_DimVal:setVarTable_DimVal,getCellEvaUnit:getCellEvaUnit,adapta:adaptaLayout,mask:mask,unmask:unmask,canUploadFile:canUploadFile,AJAXAnyMethodRaw:AJAXAnyMethodRaw,AJAXPostRaw:AJAXPostRaw,AJAXSend:AJAXSend,AJAXUploadFile:AJAXUploadFile,AJAXLoadRootJast:AJAXLoadRootJast,AJAXgetDataForId:AJAXgetDataForId};function str2lineArray(t){return t.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/)}function getWindowWidth(){return isStammLayout?(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-15:corpiny.offsetWidth}function getWindowHeight(){return isStammLayout?(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-15:corpiny.offsetHeight}function mask(t,a){layMan&&(layMan.maskLayoutId(t,a),adaptaLayout())}function unmask(t){return!(!layMan||!layMan.unmaskLayoutId(t))&&(adaptaLayout(),!0)}function adaptaLayout(){if(layMan){var t=getWindowWidth(),a=getWindowHeight(),e=layMan.guiConfig.layoutWindowLimits;if(e&&e[0]){var n=parseInt("0"|e[0][0]),i=parseInt("0"|e[0][1]),r=parseInt("0"|e[0][2]),o=parseInt("0"|e[0][3]);t=Math.max(t,n),a=Math.max(a,i),r>0&&(t=Math.min(t,r)),o>0&&(a=Math.min(a,o))}layMan&&layMan.doLayout(t,a)}}function loadJast(t,a){if(laData=dataStruct(),listixUnit={},layMan=void 0,t){if(laData=dataStruct(t.data),listixUnit=t.jListix||t.jlistix||t.listix||{},!corpiny){var e=a||"jGastonaStammHtmlElem";document.getElementById(e)||(document.body.innerHTML="<div id='"+e+"' style = 'position:relative;'></div>",isStammLayout=!0),corpiny=document.getElementById(e)}if(corpiny){for(;corpiny.hasChildNodes();)corpiny.removeChild(corpiny.firstChild);losWidgets=zWidgets(corpiny,laData,mensaka),layMan=layoutManager(t,losWidgets),adaptaLayout();var n=listixUnit.main;n&&executeListixFormat(n)}else console.error("no baseId can be found!")}}function mensaka(t){var a=t.indexOf(" ");if(a>0){var e=t.substr(0,a),n=t.substr(a+1);losWidgets.deliverMsgToWidget(e,n)}var i=laData.dataUnit["-- "+t]||listixUnit["-- "+t];i&&executeListixFormat(i)}function executeListixFormat(fbody){eval(fbody.join("\n"))}function updatezWidget(t){mensaka(t+" data!")}function jaxGetHttpReq(){return window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):void alert("Your browser does not support AJAX!")}function ajaxGenericPreProcessResponse(t){}function AJAXAnyMethodRaw(t,a,e,n,i){var r=jaxGetHttpReq();if(!r)return!1;var o=a.substring(0,a.indexOf("?"));if(0==o.length&&(o=a),r.onreadystatechange=function(){4==r.readyState&&200==r.status&&(ajaxGenericPreProcessResponse(r),"function"==typeof i?i(r.responseText,r):"object"==typeof i&&Object.assign(i,httUnpack(r.responseText,r)),mensaka(AJAX_RESPONSE_MESSAGE+" "+o))},r.open(t,a,!0),n)for(var l in n)r.setRequestHeader(l,n[l]);r.send(e||"")}function AJAXPostRaw(t,a,e,n){return AJAXAnyMethodRaw("POST",t,a,e,n)}function AJAXSend(t,a,e){var n=httPack(a,laData.dataUnit);AJAXPostRaw(t+"?"+n.onelineparams,n.body,n.headers,e)}function htmlElem(t){return"string"==typeof t?document.getElementById(t):t}function canUploadFile(t,a,e,n){var i=htmlElem(t).files[0],r=a;return i&&""!==i?!(r&&r>0&&i.size>1024*r*1024)||(""!==n&&alert(n||"File is too big to be uploaded, limit is "+a+" MB"),!1):(""!==e&&alert(e||"Please first choose a file!"),!1)}function AJAXUploadFile(t,a,e,n){if(!t)return!1;var i=htmlElem(t).files[0];if(!i||""===i)return!1;var r=new FormData;return r.append("filename",i),AJAXPostRaw(a+"?fileName="+i,r,e,n),!0}function AJAXLoadRootJast(t,a){AJAXPostRaw("loadRootJast?jastName="+t,"",null,function(t){loadJast(evaFileStr2obj(t),a)})}function AJAXgetDataForId(t,a,e,n){var i=httPack(a,laData.dataUnit);AJAXPostRaw("getDataForId?id="+t+"&"+i.onelineparams,i.body,i.headers,function(a){setContentsFromBody(t,a,e,n),mensaka(AJAX_RESPONSE_MESSAGE+" getDataForId "+t)})}function setValueToElement(t,a){t&&("string"==typeof t.value?t.value=a:t.innerHTML=a)}function setContentsFromBody(t,a,e,n){var i=e?"":a;if(e){for(var r=str2lineArray(a),o=0;o<r.length;){var l=r[o++];if(!l)break;var s=/([^:]*):(.*)/.exec(l);laData.setData(s[1],s[2])}i=r.slice(o).join("\n")}if(n){var d=document.getElementById(t);d&&setValueToElement(d,i)}else laData.setData(t,i)}}
